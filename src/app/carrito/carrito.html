<!-- src/app/carrito/carrito.html -->
<div class="relative">
  <div class="hidden md:block fixed inset-0 w-screen h-[100dvh] bg-cover bg-center bg-no-repeat z-0" style="background-image: url('/descarga.png');"></div>

  <!-- Imagen de fondo para móvil -->
  <div class="block md:hidden fixed inset-0 w-screen h-auto bg-cover bg-center bg-no-repeat z-0" style="background-image: url('/iamgenCarritoMovil.png');"></div>
  <div class="relative z-10 flex items-start justify-center min-h-screen pt-6 px-4">
    <div class="w-full max-w-5xl h-auto max-h-[90vh] p-6 bg-white/30 backdrop-blur-md border border-gray-200 rounded-lg shadow-sm hover:bg-white/50 dark:bg-gray-800/30 dark:backdrop-blur-md dark:border-gray-700 dark:hover:bg-gray-700/50 overflow-y-auto">

      <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white text-center">Carrito</h5>
      <hr class="border-black mb-5">

      <div class="flex flex-col items-center gap-6">

        @for (prod of productosEnCarrito; track i; let i = $index) {
          <div class="w-full mx-2 flex flex-col md:flex-row items-start bg-white/40 dark:bg-gray-800/40 p-4 md:p-6 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:bg-white/50 dark:hover:bg-gray-800/50 mb-4">
            <img [src]="prod.foto ? 'data:image/jpeg;base64,' + prod.foto : 'assets/default.jpg'" [alt]="prod.nombre"
                 class="object-cover w-full md:w-48 h-64 md:h-auto rounded-lg mb-4 md:mb-0 md:mr-6"
                 [alt]="prod.nombre || 'Producto ' + (i + 1)">

            <div class="flex flex-col justify-between flex-1">
              <div class="flex justify-between items-center w-full mb-2">
                <h5 class="text-2xl font-bold text-gray-900 dark:text-white">{{ prod.nombre }}</h5>
                <p class="text-xl font-bold text-gray-900 dark:text-white">{{ prod.precio }}€</p>
              </div>

              <p class="text-gray-700 dark:text-gray-300 mb-4">{{ prod.descripcion }}</p>

              <div class="flex justify-between items-center w-full">
                <p class="text-gray-900 dark:text-white">Cant: {{obtenerCantidadProducto(prod.id?? 0)}}</p>
                <button
                        (click)="quitarItem(prod.id?? 0)"
                        class="px-4 py-2 text-sm font-medium text-white bg-red-500 rounded hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400">
                  Quitar
                </button>
              </div>
            </div>
          </div>
        }

        <button (click)="finalizarCompra()" class="w-full md:w-auto px-6 py-3 bg-blue-500 text-white font-bold rounded hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400">
          Finalizar Compra</button>

      </div>
    </div>
  </div>
</div>
